{% load static %}
<div class="tab-pane fade" id="tab-products">
  <div class="d-flex flex-wrap justify-content-between align-items-center mb-4">
    <h3 class="mb-2 mb-md-0">Manage Inventory</h3>
    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addProductModal">+ Add Product</button>
  </div>
  <div class="table-responsive bg-white p-3 rounded shadow-sm">
    <table class="table table-hover align-middle">
      <thead class="table-light">
        <tr>
          <th>Image</th>
          <th>Name</th>
          <th>Price</th>
          <th>Stock</th>
          <th>Status</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        {% for product in products %}
          <tr id="product-row-{{product.id}}">
            <td id="product-image-{{product.id}}" class="product-image">
              {% if product.images %}
              <img src="{{ product.images.url }}" alt="{{ product.name }}" class="img-fluid" width="100" height="100"/>
              {% else %}
              <img src="{% static 'core/img/placeholder.png' %}" alt="No Image" class="img-fluid" style="width: 50px; height: 50px; object-fit: cover; opacity: 0.5;"/>
              {% endif %}
            </td>
            <td>{{ product.name }}</td>
            <td>${{ product.price }}</td>
            <td>{{ product.stock }} kg</td>
            {% if product.is_available == True %}
            <td>
              <span class="badge bg-success">Available</span>
            </td>
            {% else %}  
            <td>
              <span class="badge bg-danger">Unavailable</span>
            </td>
            {% endif %}
            <td>
              <button class="btn btn-sm btn-outline-primary update-product-btn"
                      data-product-id="{{ product.id }}"
                      data-product-name="{{ product.name }}"
                      data-product-description="{{ product.description }}"
                      data-product-price="{{ product.price }}"
                      data-product-images="{{product.images}}"
                      data-product-category="{{ product.category.id }}"
                      data-product-stock="{{ product.stock }}"
                      data-product-availability="{{ product.is_available }}"
                      
                      data-edit-url="{% url 'product_app:edit_product' product.id %}">
                      <i class="fa fa-edit"></i>
              </button>
              <button class="btn btn-sm btn-outline-danger delete-product-btn"
               data-product-id="{{ product.id }}"
               data-delete-url="{% url 'product_app:delete_product' product.id %}">
                <i class="fa fa-trash"></i>
              </button>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
